<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.118.1">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="../../../images/favicon.png" type="image/png">

    <title>URI based Redirects :: AWS System Manager</title>

    
    <link href="../../../css/nucleus.css?1694141728" rel="stylesheet">
    <link href="../../../css/fontawesome-all.min.css?1694141728" rel="stylesheet">
    <link href="../../../css/hybrid.css?1694141728" rel="stylesheet">
    <link href="../../../css/featherlight.min.css?1694141728" rel="stylesheet">
    <link href="../../../css/perfect-scrollbar.min.css?1694141728" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1694141728" rel="stylesheet">
    <link href="../../../css/atom-one-dark-reasonable.css?1694141728" rel="stylesheet">
    <link href="../../../css/theme.css?1694141728" rel="stylesheet">
    <link href="../../../css/hugo-theme.css?1694141728" rel="stylesheet">
    
    <link href="../../../css/theme-workshop.css?1694141728" rel="stylesheet">
    
    

    <script src="../../../js/jquery-3.3.1.min.js?1694141728"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="../../../vi/3-cache/3.1-urired/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="../../../">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../../js/lunr.min.js?1694141728"></script>
<script type="text/javascript" src="../../../js/auto-complete.js?1694141728"></script>
<script type="text/javascript">
    
        var baseurl = "\/vi";
    
</script>
<script type="text/javascript" src="../../../js/search.js?1694141728"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-setup/" title="Account and Environment Setup" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/1-setup/">
           <b> 1. </b> Account and Environment Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-powertuning/" title="Power Tuning" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/2-powertuning/">
           <b> 2. </b> Power Tuning
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-powertuning/2.1-deploy/" title="Deploy The Lambda Power Tuning Tool" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/2-powertuning/2.1-deploy/">
           <b> 2.1. </b> Deploy The Lambda Power Tuning Tool
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-powertuning/2.2-deploytest/" title="Deploy Test Lambda Function" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/2-powertuning/2.2-deploytest/">
           <b> 2.2. </b> Deploy Test Lambda Function
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-cache/" title="Trường hợp cho Cacheable" class="dd-item 
        parent
        
        
        ">
      <a href="../../../vi/3-cache/">
           <b> 3. </b> Trường hợp cho Cacheable
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-cache/3.1-urired/" title="URI based Redirects" class="dd-item 
        
        active
        
        ">
      <a href="../../../vi/3-cache/3.1-urired/">
           <b> 3.1. </b> URI based Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-cache/3.2-geored/" title="Geo Location Redirects" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/3-cache/3.2-geored/">
           <b> 3.2. </b> Geo Location Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-cache/3.3-devicered/" title="Device Redirects" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/3-cache/3.3-devicered/">
           <b> 3.3. </b> Device Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-cache/3.4-urirew/" title="URI based Rewrites" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/3-cache/3.4-urirew/">
           <b> 3.4. </b> URI based Rewrites
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-terminate/" title="Dọn dẹp tài nguyên" class="dd-item 
        
        
        
        ">
      <a href="../../../vi/4-terminate/">
           <b> 4. </b> Dọn dẹp tài nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/3-cache/3.1-urired/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/3-cache/3.1-urired/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>30-01-2022</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
                <a href="#"  style="color:orange">Hoàng Kha</a> <br>
                <a href="https://www.linkedin.com/in/l%C3%AA-ngh%C4%A9a-43075a197/"  style="color:orange">Minh nghĩa</a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../../vi/'>Tối ưu hóa cho Serverless (Performance and Cost)</a> > <a href='../../../vi/3-cache/'>Trường hợp cho Cacheable</a> > URI based Redirects
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              URI based Redirects
            </h1>
          

        



	<p>Trong phần này, chúng ta sẽ bắt đầu với một trường hợp đơn giản có thể dễ dàng hiểu được bằng cách sử dụng <strong>Lambda@Edge</strong> vì trường hợp này có thể được cached, do đó sẽ tốt nhất khi xử lí bằng các <strong>Lambda@Edge.</strong></p>
<p>Trường hợp này thường được sử dụng để redirect users vì một lí do nào đó khi request URI mà admin không muốn users đó xem hoặc URI có thể không khả dụng nữa. Ví dụ, user có thể gửi request đến <strong>/uri-main.html</strong>, tuy nhiên, admin muốn tất cả request đó được thực hiện bởi <strong>/uri-redirect.html</strong></p>
<h4 id="step-1-tạo-ra-cache-behavior-cho-trường-hợp-này">Step 1: Tạo ra Cache Behavior cho trường hợp này</h4>
<p>Để thực hiện được trường hợp này, đầu tiên bạn sẽ tạo ra một cache behavior cụ thể. Các bước sau dây sẽ hướng dẫn để làm trường hợp này.</p>
<ol>
<li>Đi đến <a href="https://us-east-1.console.aws.amazon.com/cloudfront/v3/home">CloudFront console</a>. Các bạn sẽ thấy Distribution được tạo ra bởi CloudFormation template, nó sẽ được xác định bởi <strong>Edge Redirect Workshop Distribution</strong> như ở mục <strong>Description</strong>.</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-1new.png" alt="VPC"></p>
<ol start="2">
<li>Chọn Distribution đó sau đó chọn vào mục <strong>Behaviors.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-2.png" alt="VPC"></p>
<ol start="3">
<li>Click vào nút <strong>Create Behavior.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-3new.png" alt="VPC"></p>
<ol start="4">
<li>Ở mục <strong>Path pattern,</strong> chúng ta nhập <code>/uri-main.html</code>, ở dưới là phần <strong>Origin and origin groups,</strong> chúng ta chọn <strong>myS3Origin.</strong> Ở phần <strong>Viewer protocol policy,</strong> chúng ta chọn <strong>Redirect HTTP to HTTPS.</strong> Những mục còn lại chúng ta sẽ để mặc định và click vào nút <strong>Create behavior</strong> ở cuối trang.</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-4new.png" alt="VPC"></p>
<h4 id="step-2-tạo-lambdaedge-function-và-publish-new-version">Step 2: Tạo Lambda@Edge function và publish new version</h4>
<p>Bước này sẽ là quá trình tạo ra function của chúng ta cùng với version của nó. Các Lambda@Edge functions cần được CloudFront Distribution refer dựa vào version ARN của chúng chứ không phải main function ARN của chúng.</p>
<ol>
<li>Đi vào <a href="https://us-east-1.console.aws.amazon.com/lambda/home?region=us-east-1#/create/function">Lambda Console</a> ỏ AWS Region <strong>us-east-1</strong>, click vào nút <strong>Create function.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-5new.png" alt="VPC"></p>
<ol start="2">
<li>Ở trang <strong>Create function,</strong> đặt tên cho function của chúng ta là <code>edge-uri-redirect</code>, chọn <strong>Python 3.9</strong> cho phần <strong>Runtime.</strong> Ở phía dưới, chúng ta mở mục <strong>Change default execution role</strong> rồi chọn <strong>Use an existing role,</strong> chúng ta chọn <strong>edge-redirect-lambda-role</strong> (đây là role được tạo từ CloudFormation template). Cuối cùng là click vào nút <strong>Create function.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-6new.png" alt="VPC"></p>
<ol start="3">
<li>Khi function được tạo xong, chúng ta ở trang chính của function đó. Ở phần <strong>Code</strong> ở dưới, chúng ta copy đoạn code dưới đây và paste vào phần <strong>Code source.</strong></li>
</ol>
<pre tabindex="0"><code>import json
def lambda_handler(event, context):
    get_uri = event[&#39;Records&#39;][0][&#39;cf&#39;][&#39;request&#39;][&#39;uri&#39;]
    print(get_uri)

    if (get_uri == &#39;/uri-main.html&#39;):
        response = {
            &#39;status&#39;: &#39;301&#39;,
            &#39;statusDescription&#39;: &#39;Permanent Redirect&#39;,
            &#39;headers&#39;: {
                &#39;location&#39;: [{
                    &#39;key&#39;: &#39;Location&#39;,
                    &#39;value&#39;: &#39;/uri-redirect.html&#39;
                }]
            }
        }
        return response
    else:
        request = event[&#39;Records&#39;][0][&#39;cf&#39;][&#39;request&#39;]
        return request
</code></pre><p>Ở đoạn code này được dùng như một AWS CloudFront function. Nó phục vụ cho CloudFront event handler và implement logic cho URL redirection dựa vào URI được request. Function <strong>lambda_handler</strong> là entry point của Lambda function, nó gồm 2 parameters là <strong>event</strong> và <strong>context</strong>. Function này extract URI được request từ CloudFront event. Nếu request URI là <strong>/uri-main.html</strong>, code sẽ trả về một response với <strong>status code 301</strong> và <strong>location header</strong> được set là <strong>/uri-redirect.html</strong>. Nếu URI không phải là <strong>/uri-main.html</strong>, code sẽ trả về request object.</p>
<p><img src="../../../images/3.cache/3.1-urired/3.1-7new.png" alt="VPC"></p>
<ol start="4">
<li>Tiếp theo, click vào nút <strong>Deploy</strong> để code của lambda function của chúng ta được commit. Khi code của chúng ta được deploy thành công, chúng ta sẽ publish version mới cho lambda này. Click vào nút <strong>Actions</strong> ở góc bên phải, chúng ta chọn <strong>Publish new version.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-8new.png" alt="VPC"></p>
<p>Chúng ta nhập <code>edge-uri-redirect-v1</code> cho phần <strong>Version description</strong> và click vào nút <strong>Publish.</strong></p>
<p><img src="../../../images/3.cache/3.1-urired/3.1-9new.png" alt="VPC"></p>
<h4 id="step-3-kết-hợp-lambda-function-với-cloudfront-behavior">Step 3: Kết hợp Lambda Function với CloudFront Behavior</h4>
<ol>
<li>
<p>Quay trở lại lambda function console và mở function <strong>edge-uri-redirect.</strong></p>
</li>
<li>
<p>Click vào <strong>+ Add trigger</strong></p>
</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-10new.png" alt="VPC"></p>
<ol start="3">
<li>Ở trang <strong>Trigger configuration</strong>, chúng ta chọn <strong>CloudFront</strong> cho phần <strong>source</strong>. Sau đó click vào <strong>Deploy on Lambda@Edge</strong>.</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-11new.png" alt="VPC"></p>
<ol start="4">
<li>Có một cửa số mới mở ra, ở phần <strong>Distribution</strong>, chúng ta chọn distribution được tạo từ CloudFormation template. Phần <strong>Cache behavior,</strong> chúng ta chọn <strong>/uri-main.html</strong>. Ở phần <strong>CloudFront event</strong>, chọn <strong>Origin request</strong>. Đánh dấu vào ô <strong>Confirm deploy to Lambda@Edge</strong> và click vào nút <strong>Deploy.</strong></li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-12new.png" alt="VPC"></p>
<h4 id="step-4-set-up-client-cho-testing">Step 4: Set up client cho testing</h4>
<p>Để test redirect cụ thể, chúng ta sẽ cần một client để chạy curl commands. Cách dễ dàng đó là tạo <strong>CloudShell Environments</strong>. CloudShell là một shell có sẵn trong AWS console và chúng ta có thể chạy những Linux command từ nó. Đi đến <a href="https://us-east-1.console.aws.amazon.com/cloudshell/home?region=us-east-1#">CloudShell Console</a> và chờ đến khi terminal sẵn sàng để dùng.</p>

<div class="notices info" ><p>Nếu CloudShell không hoạt động thì nếu bạn đang thực hành bài workshop này ở Linux/MacOS client thì hai hệ điều hành này đã có sẵn <strong>curl</strong> và bạn chỉ cần chạy command ở client đó. Nếu bạn đang thực hành trên Windows thì hãy tận dùng online curl tools như <a href="https://reqbin.com/curl">cái này</a>. Có thể chạy EC2 instance hoặc Cloud9 IDE từ AWS COnsole để chạy commands.</p>
</div>

<h4 id="step-5-test-redirect-configuration">Step 5: Test redirect configuration</h4>
<ol>
<li>
<p>Đi đến <a href="https://us-east-1.console.aws.amazon.com/cloudshell/home?region=us-east-1#">CloudShell Console</a>.</p>
</li>
<li>
<p>Trong phần test, chúng ta sẽ chạy câu lệnh curl để gửi http request đối với distrubtion của chúng ta, để làm như vậy, chúng ta cần copy Distribution domain name từ CloudFront console nơi chúng ta có thể tìm thấy.</p>
</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-13new.png" alt="VPC"></p>
<p>Khi đã tìm thấy distribution domain name, copy câu lệnh sau và thay thế domain name của chúng ta vào.</p>
<pre tabindex="0"><code>curl -v -o /dev/null https://&lt;YOUR-DISTRIBUTION-DOMAIN-NAME&gt;/uri-main.html
</code></pre><ol start="3">
<li>Sau khi build câu lệnh trên từ cloudshell, chúng ta sẽ thấy kết quả như dưới đây.</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-14.png" alt="VPC"></p>

<div class="notices info" ><p>Chúng ta có thể thấy ở kết quả trên, request này nhận response HTTP 301, biểu thị redirect và Location header là URI nơi mà client được redirect đến.</p>
</div>

<ol start="4">
<li>Bây giờ, chúng ta chạy lại cùng câu lệnh trên. Và xem sự khác biệt.</li>
</ol>
<p><img src="../../../images/3.cache/3.1-urired/3.1-15.png" alt="VPC"></p>

<div class="notices info" ><p>Sự khác biệt ở lần chạy câu lệnh này lại là giá trị của X-Cache header. Request bây giờ nhận response được redirect và đã được cache từ lần chạy câu lệnh trước đó. Có nghĩa là Lambda@edge của chúng ta không cần trigger lại, tiết kiệm thời gian và chi phí.</p>
</div>

<p>Chúng ta đã deploy thành công redirect đầu tiên bằng Lambda@Edge và đã test xong. Bây giờ chúng ta di chuyển sang trường hợp tiếp theo.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../../vi/3-cache/" title="Trường hợp cho Cacheable"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../../vi/3-cache/3.2-geored/" title="Geo Location Redirects" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../../js/clipboard.min.js?1694141728"></script>
    <script src="../../../js/perfect-scrollbar.min.js?1694141728"></script>
    <script src="../../../js/perfect-scrollbar.jquery.min.js?1694141728"></script>
    <script src="../../../js/jquery.sticky.js?1694141728"></script>
    <script src="../../../js/featherlight.min.js?1694141728"></script>
    <script src="../../../js/highlight.pack.js?1694141728"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../../js/modernizr.custom-3.6.0.js?1694141728"></script>
    <script src="../../../js/learn.js?1694141728"></script>
    <script src="../../../js/hugo-learn.js?1694141728"></script>

    <link href="../../../mermaid/mermaid.css?1694141728" rel="stylesheet" />
    <script src="../../../mermaid/mermaid.js?1694141728"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
